# run a command with the "shell" module and register the result into the
# "default_shell" variable
- name: zsh facts
  shell: "echo $SHELL"
  register: default_shell
  # changed_when determines when will this task be considered changed when running
  # ansible. In this case, we want it to always be false, as we are just
  # retrieving information.
  changed_when: False

# TODO: fix this (docs are down ATM so this waits)
# set zsh as the default shell, unless it is already the default.
#- name: make zsh default
  #shell: chsh -s /bin/zsh
  #when: default_shell != "/usr/bin/zsh"

- name: symlink config to home
  file: src={{ dotfiles }}/zsh/{{ item }} dest={{ home }}/{{ item }} state=link
  with_items:
    - .zsh
    - .zshrc
    - .zprofile
    - .zshenv
